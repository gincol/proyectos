<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="es.bcn.imi.framework.vigia.frontal.gap.inventary.orm.dao.ValueListGapDao">
   
    <select id="getValueListsGap" resultType="es.bcn.vigia.fmw.libcommons.integration.orm.model.gap.ValueListGap">
        SELECT 
	        ENTIDAD,
			CODI AS code, 
			DESCRIPCIO AS description 
		FROM 
			VW_DOMINIS
		WHERE 
			TRANSLATE(REPLACE(UPPER(TRIM(ENTIDAD)), ' ', '_'),
			<![CDATA['ñáéíóúàèìòùãõâêîôôäëïöüçÑÁÉÍÓÚÀÈÌÒÙÃÕÂÊÎÔÛÄËÏÖÜÇ·' ]]> ,
			'naeiouaeiouaoaeiooaeioucNAEIOUAEIOUAOAEIOOAEIOUC') = UPPER(#{entity})			
    </select>
    
	<select id="getDomainsGap" resultType="java.lang.String">
		SELECT 
			DISTINCT UPPER(ENTIDAD) as entity
		FROM 
			VW_DOMINIS
	</select>
    
	<select id="getDomainValuesGap" parameterType="java.util.Map" resultType="es.bcn.vigia.fmw.libcommons.integration.orm.model.gap.ValueListGap">
		SELECT 
	        ENTIDAD as entity,
	        CODI AS code, 
	        DESCRIPCIO AS description 
	    FROM 
	        VW_DOMINIS
	    WHERE
	        1=1
			<if test="name != null">
				AND UPPER(ENTIDAD) = UPPER(#{name})	
	        </if>
	</select>
    
</mapper>