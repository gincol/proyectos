<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="es.bcn.imi.framework.vigia.frontal.inventary.orm.dao.CompatibilityDao">
    
    <select id="getCompatibilityTypesMCLUbication" resultType="es.bcn.vigia.fmw.libcommons.integration.orm.model.CompatibilityTypesMCLUbication">
        SELECT
            COMPATIBILITAT_MCL_UBICACIO_ID AS id,
			CODI_TIPUS_MCL AS codeMCLType,
			CODI_TIPUS_UBICACIO AS codeUbicationType
        FROM 
            TB_COMPATIBILITAT_MCL_UBICACIO
        WHERE
            DATA_INICI  <![CDATA[ <= ]]> SYSDATE AND (DATA_FI  <![CDATA[ >= ]]> SYSDATE OR DATA_FI IS NULL)
        <if test="codeUbicationType != null">
        	AND
        		CODI_TIPUS_UBICACIO = UPPER(#{codeUbicationType})
        </if>
        <if test="codeMCLType != null">	     
			AND
            	CODI_TIPUS_MCL = UPPER(#{codeMCLType})
        </if>   
    </select>
    
    <select id="getCompatibilityTypesSensorMCF" resultType="es.bcn.vigia.fmw.libcommons.integration.orm.model.CompatibilityTypesMCFSensor">
        SELECT
            COMPATIBILITAT_MCF_SENSOR_ID AS id,
			CODI_TIPUS_MCF AS codeMCFType,
			CODI_TIPUS_SENSOR AS codeSensorType
        FROM 
            TB_COMPATIBILITAT_MCF_SENSOR
        WHERE
            DATA_INICI  <![CDATA[ <= ]]> SYSDATE AND (DATA_FI  <![CDATA[ >= ]]> SYSDATE OR DATA_FI IS NULL)
        <if test="codeSensorType != null">
        	AND
        		CODI_TIPUS_SENSOR = UPPER(#{codeSensorType})
        </if>
        <if test="codeMCFType != null">	     
			AND
            	CODI_TIPUS_MCF = UPPER(#{codeMCFType})
        </if>   
    </select>
    
        <select id="getCompatibilityTypesSensorRRMM" resultType="es.bcn.vigia.fmw.libcommons.integration.orm.model.CompatibilityTypesRRMMSensor">
        SELECT
            COMPATIBILITAT_RRMM_SENSOR_ID AS id,
			CODI_TIPUS_RRMM AS codeRRMMType,
			CODI_TIPUS_SENSOR AS codeSensorType
        FROM 
            TB_COMPATIBILITAT_RRMM_SENSOR
        WHERE
            DATA_INICI  <![CDATA[ <= ]]> SYSDATE AND (DATA_FI  <![CDATA[ >= ]]> SYSDATE OR DATA_FI IS NULL)
        <if test="codeSensorType != null">
        	AND
        		CODI_TIPUS_SENSOR = UPPER(#{codeSensorType})
        </if>
        <if test="codeRRMMType != null">	     
			AND
            	CODI_TIPUS_RRMM = UPPER(#{codeRRMMType})
        </if>   
    </select>
</mapper>

